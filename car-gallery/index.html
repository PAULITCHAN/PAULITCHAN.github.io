 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Toyota Car Gallery — API</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
:root{
  --bg:#0f1113;
  --card:#1c1c1c;
}
body{background:var(--bg);color:#fff}
.gallery-card{
  background:var(--card);
  border-radius:12px;
  overflow:hidden;
  transition:.25s;
  height:100%;
}
.gallery-card:hover{
  transform:translateY(-6px);
  box-shadow:0 14px 30px rgba(0,0,0,.6)
}
.gallery-img{height:180px;object-fit:cover;width:100%}
.pagination .page-link{background:#1c1c1c;color:#fff}
</style>
</head>

<body>

<nav class="navbar navbar-dark bg-dark sticky-top">
<div class="container">
<span class="navbar-brand fw-bold">Toyota Gallery (API)</span>
<input id="search" class="form-control w-50" placeholder="Search Toyota model">
</div>
</nav>

<header class="text-center py-4">
<h1>Toyota Car Gallery</h1>
<p>Loaded using Fetch API</p>
<p class="mt-2">
  <a class="btn btn-outline-light btn-sm" href="https://paulitchan.github.io/api-public-demo/" target="_blank" rel="noopener">View API Demo Site</a>
</p>
</header>

<main class="container pb-5">
<div class="row g-4" id="gallery"></div>
<ul class="pagination justify-content-center mt-4" id="pagination"></ul>
<p id="noResult" class="text-center d-none">No results found</p>
</main>

<!-- MODAL -->
<div class="modal fade" id="carModal">
<div class="modal-dialog modal-lg modal-dialog-centered">
<div class="modal-content bg-dark text-white">
<div class="modal-header border-0">
<h5 id="modalTitle"></h5>
<button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<img id="modalImg" class="w-100 rounded mb-3">
<p id="modalInfo"></p>
<p id="modalDesc"></p>
</div>
</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
const API = "./data/toyota.json";
const gallery = document.getElementById("gallery");
const pagination = document.getElementById("pagination");
const search = document.getElementById("search");
const noResult = document.getElementById("noResult");

let cars = [];
let filtered = [];
let page = 1;
const perPage = 8;

fetch(API)
.then(res => res.json())
.then(data => {
  cars = data;
  filtered = data;
  render();
});

function render(){
  gallery.innerHTML="";
  const start=(page-1)*perPage;
  const items=filtered.slice(start,start+perPage);

  if(items.length===0){
    noResult.classList.remove("d-none");
    return;
  }
  noResult.classList.add("d-none");

  items.forEach((car,i)=>{
    gallery.innerHTML+=`
    <div class="col-md-3 col-sm-6">
      <div class="gallery-card">
        <img src="${car.image}" class="gallery-img">
        <div class="p-3">
          <h6>${car.model}</h6>
          <small>${car.year} • ${car.category}</small>
          <p class="small mt-2">${car.description}</p>
          <button class="btn btn-outline-light btn-sm"
            onclick="openModal(${start+i})">View</button>
        </div>
      </div>
    </div>`;
  });

  renderPagination();
}

function renderPagination(){
  pagination.innerHTML="";
  const total=Math.ceil(filtered.length/perPage);
  for(let i=1;i<=total;i++){
    pagination.innerHTML+=`
    <li class="page-item">
      <a href="#" class="page-link ${i===page?'active':''}"
      onclick="goPage(${i})">${i}</a>
    </li>`;
  }
}

function goPage(p){page=p;render()}

search.addEventListener("input",()=>{
  const q=search.value.toLowerCase();
  filtered=cars.filter(c=>c.model.toLowerCase().includes(q));
  page=1;
  render();
});

function openModal(i){
  const car=filtered[i];
  modalTitle.textContent=car.model;
  modalImg.src=car.image;
  modalInfo.textContent=`${car.year} • ${car.category}`;
  modalDesc.textContent=car.description;
  new bootstrap.Modal(carModal).show();
}
</script>

</body>
</html>
